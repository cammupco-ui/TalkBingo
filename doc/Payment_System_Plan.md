# ê²°ì œ ì‹œìŠ¤í…œ ì „ëµ: í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸ ë° í™˜ë¶ˆ ì •ì±…

TalkBingoì˜ ìˆ˜ìµí™” ì „ëµì€ ìŠ¤í† ì–´ ì •ì±…ì„ ì¤€ìˆ˜í•˜ë©´ì„œë„ ìˆ˜ìµì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” **í•˜ì´ë¸Œë¦¬ë“œ ê²°ì œ ëª¨ë¸**ì„ ë”°ë¥´ë©°, ê²°ì œ ì‹¤íŒ¨ ë° í™˜ë¶ˆì— ëŒ€í•œ ì•ˆì „ì¥ì¹˜ë¥¼ ë§ˆë ¨í•©ë‹ˆë‹¤.

---

## 1. í•˜ì´ë¸Œë¦¬ë“œ ê²°ì œ ì „ëµ (Hybrid Monetization Strategy)

**í•µì‹¬ ê°œë…: "ì‹œìŠ¤í…œì€ ë‘˜ì´ì§€ë§Œ, ìœ ì €ëŠ” í•˜ë‚˜ë§Œ ë³¸ë‹¤"**

ê²°ì œ ì‹œìŠ¤í…œì€ ê¸°ìˆ ì ìœ¼ë¡œ ë‘ ê°€ì§€(IAP, Web PG)ë¥¼ ëª¨ë‘ êµ¬ì¶•í•˜ì§€ë§Œ, ìœ ì €ì˜ ì ‘ì† í™˜ê²½ì— ë”°ë¼ ì‹œìŠ¤í…œì´ ê²°ì œ ìˆ˜ë‹¨ì„ ê°•ì œë¡œ ì§€ì •í•©ë‹ˆë‹¤.

### 1-1. í”Œë«í¼ë³„ ìœ ì € ê²½í—˜ (UX)
ìœ ì €ëŠ” ê³ ë¯¼í•  í•„ìš” ì—†ì´, í˜„ì¬ ì ‘ì†í•œ í™˜ê²½ì— ë§ëŠ” **ë‹¨ í•˜ë‚˜ì˜ ê²°ì œ ë²„íŠ¼**ë§Œ ë³´ê²Œ ë©ë‹ˆë‹¤.

| ì ‘ì† í™˜ê²½ | URL / ì•± ì‹¤í–‰ | ìœ ì €ê°€ ë³´ëŠ” í™”ë©´ | ì‹¤ì œ ê²°ì œ ì‹œìŠ¤í…œ | ìˆ˜ìˆ˜ë£Œ |
|---|---|---|---|---|
| **ì›¹ (Web)** | `talkbingo.com` | **"í¬ì¸íŠ¸ ì¶©ì „" (PG)** | í¬íŠ¸ì› (PG) | ~3% (ì €ë ´) |
| **ì•± (App)** | iOS / Android ì•± | **"í¬ì¸íŠ¸ ì¶©ì „" (IAP)** | ì• í”Œ/êµ¬ê¸€ ì¸ì•±ê²°ì œ | ~30% (ë†’ìŒ) |

> **âš ï¸ ì•± ë‚´ UX ì£¼ì˜ì‚¬í•­ (App Store ì •ì±…)**
> *   ì•± ë‚´ì—ì„œëŠ” ì›¹ ê²°ì œ ë²„íŠ¼ì„ ì ˆëŒ€ ë…¸ì¶œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
> *   "ì›¹ì´ ë” ì‹¸ìš”" ê°™ì€ ë¬¸êµ¬ë‚˜ ì™¸ë¶€ ë§í¬ë¥¼ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (Anti-Streeing ìœ„ë°˜)
> *   ì˜¤ì§ ìŠ¤í† ì–´ ê³µì‹ ì¸ì•± ê²°ì œ(IAP)ë§Œ ë³´ì—¬ì¤ë‹ˆë‹¤.

### 1-2. ìˆ˜ìµ ìµœì í™” ì „ëµ (Marketing)
ìˆ˜ìˆ˜ë£Œê°€ ì €ë ´í•œ ì›¹ ê²°ì œë¡œ ìœ ë„í•˜ëŠ” ê²ƒì€ **ì•± ë°–(Outside App)**ì—ì„œë§Œ ì§„í–‰í•©ë‹ˆë‹¤.

*   âœ… **í—ˆìš©ëœ ìœ ë„ ë°©ì‹**: ì´ë©”ì¼ ë‰´ìŠ¤ë ˆí„°, SNS(ì¸ìŠ¤íƒ€/ë¸”ë¡œê·¸), ì»¤ë®¤ë‹ˆí‹° ê³µì§€, ê³ ê°ì„¼í„° FAQ.
*   âŒ **ê¸ˆì§€ëœ ìœ ë„ ë°©ì‹**: ì•± ë‚´ íŒì—…, ì•± ë‚´ ê³µì§€ì‚¬í•­ ë§í¬.

### 1-3. ë°ì´í„° ë™ê¸°í™” (Data Sync)
*   **ì›ì¥ ê´€ë¦¬**: ê²°ì œ ë°©ì‹ì€ ë‹¤ë¥´ì§€ë§Œ, êµ¬ë§¤í•œ í¬ì¸íŠ¸(VP/AP)ëŠ” ëª¨ë‘ **Supabase**ì˜ ë™ì¼í•œ `profiles` í…Œì´ë¸”ì— ì €ì¥ë©ë‹ˆë‹¤.
*   **ìœ ì € í˜œíƒ**: ìœ ì €ê°€ ì´ë©”ì¼ì„ ë³´ê³  ì›¹ì—ì„œ ì‹¸ê²Œ ì¶©ì „í•˜ë”ë¼ë„, ì•±ì— ë“¤ì–´ì˜¤ë©´ ì¦‰ì‹œ í•´ë‹¹ í¬ì¸íŠ¸ê°€ ë°˜ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ í•™ìŠµ ê³¼ì •ì„ í†µí•´ ì¶©ì„± ìœ ì €ëŠ” ìì—°ìŠ¤ëŸ½ê²Œ ì›¹ ì¶©ì „ì„ ì„ í˜¸í•˜ê²Œ ë©ë‹ˆë‹¤.

### 1-4. TalkBingo í”Œë«í¼ ì „ëµ (Store Deployment + Web Parallel)
**âœ… "ì˜µì…˜ C: ìŠ¤í† ì–´ ë°°í¬ + ì›¹ ë³‘í–‰" (ì •ë‹µ êµ¬ì¡°)**
TalkBingoëŠ” **ì•±(ì‹ ë¢°, ìœ ì…)**ê³¼ **ì›¹(ìˆ˜ìµ ìµœì í™”)**ì˜ ì—­í• ì„ ì² ì €íˆ ë¶„ë¦¬í•˜ì—¬ ìš´ì˜í•©ë‹ˆë‹¤.

#### ğŸ“± ì•± (iOS / Android)
*   **êµ¬ì¡°**: App Store / Play Store ë“±ë¡ (Flutterë¡œ ë˜í•‘)
*   **ì—­í• **:
    *   **ìœ ì…**: ìŠ¤í† ì–´ ê²€ìƒ‰ì„ í†µí•œ ì‹ ê·œ ìœ ì € í™•ë³´.
    *   **ì‹ ë¢°**: ê³µì‹ ìŠ¤í† ì–´ ì…ì ìœ¼ë¡œ ì¸í•œ ì‹ ë¢°ë„ ìƒìŠ¹.
    *   **ê¸°ëŠ¥**: ê²Œì„ í”Œë ˆì´, ê´‘ê³  ë…¸ì¶œ, í‘¸ì‹œ ì•Œë¦¼.
    *   **ê²°ì œ**: IAP (ì¸ì•± ê²°ì œ) - ìˆ˜ìˆ˜ë£ŒëŠ” ë†’ì§€ë§Œ ì ‘ê·¼ì„±ì´ ì¢‹ìŒ.
*   **ê²°ë¡ **: **ìœ ì…Â·ì‹ ë¢°Â·í™•ì¥ ë‹´ë‹¹**

#### ğŸŒ ì›¹ì•± (ëª¨ë°”ì¼ ìµœì í™”)
*   **êµ¬ì¡°**: ë™ì¼í•œ ì„œë¹„ìŠ¤ë¥¼ ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µ (`talkbingo.com`).
*   **ì—­í• **:
    *   **ìˆ˜ìµ**: ì €ìˆ˜ìˆ˜ë£Œ(PG) ê²°ì œë¥¼ í†µí•œ ë§ˆì§„ ê·¹ëŒ€í™”.
    *   **ë§ˆì¼€íŒ…**: ì´ë©”ì¼, SNS ë§í¬ë¥¼ í†µí•œ ëœë”© í˜ì´ì§€ ì—­í• .
    *   **ì ‘ê·¼ì„±**: ì„¤ì¹˜ ì—†ì´ ë°”ë¡œ ì ‘ì† ê°€ëŠ¥ (SEO).
*   **ê²°ë¡ **: **ìˆ˜ìµ ìµœì í™” ë‹´ë‹¹**

### 1-5. ìœ ì € í–‰ë™ ì‹œë‚˜ë¦¬ì˜¤ (Reality Scenario)

#### 1) ì‹ ê·œ ìœ ì € (New User)
1.  ì•±ìŠ¤í† ì–´ì—ì„œ `TalkBingo` ê²€ìƒ‰ í›„ ì„¤ì¹˜.
2.  ì•±ì„ ì‹¤í–‰í•˜ì—¬ ê²Œì„ì„ ì¦ê¹€ (ê´‘ê³  ì‹œì²­).
3.  í¬ì¸íŠ¸ê°€ í•„ìš”í•´ì§€ë©´, **ì•± ë‚´ ìƒì **ì—ì„œ ê³ ë¯¼ ì—†ì´ IAPë¡œ ê²°ì œ. (ìˆ˜ìˆ˜ë£Œ ë°œìƒí•˜ì§€ë§Œ ìœ ì… ì„±ê³µ ë¹„ìš©ìœ¼ë¡œ ê°„ì£¼)

#### 2) ì¶©ì„± ìœ ì € (Loyal User)
1.  TalkBingoë¡œë¶€í„° "ì´ë²¤íŠ¸ ì•Œë¦¼" ì´ë©”ì¼ ìˆ˜ì‹ . (ì˜ˆ: "ê³µì‹ ì›¹ì‚¬ì´íŠ¸ì—ì„œ í¬ì¸íŠ¸ 10% ë” ë“œë ¤ìš”")
2.  ì´ë©”ì¼ ë§í¬ë¥¼ í†µí•´ **ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €**ë¡œ ì›¹ì•± ì ‘ì†.
3.  ì €ë ´í•œ ìˆ˜ìˆ˜ë£Œì˜ **PG ê²°ì œ(ì¹´ë“œ/ì¹´ì¹´ì˜¤í˜ì´)**ë¡œ í¬ì¸íŠ¸ ì¶©ì „.
4.  ë‹¤ì‹œ **ì•±**ì„ ì¼œë©´, ë°©ê¸ˆ ì¶©ì „í•œ í¬ì¸íŠ¸ê°€ ê·¸ëŒ€ë¡œ ë“¤ì–´ì™€ ìˆìŒ.
5.  ì´í›„ë¶€í„°ëŠ” "ì¶©ì „ì€ ì›¹, í”Œë ˆì´ëŠ” ì•±" íŒ¨í„´ìœ¼ë¡œ ì •ì°©.

ğŸ‘‰ **ê²°ë¡ **: ë‹¤ìš´ë¡œë“œ ê²½ë¡œëŠ” ìŠ¤í† ì–´ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë˜, ì¶©ì„± ìœ ì €ì˜ ê²°ì œ ê²½ë¡œë§Œ ì›¹ìœ¼ë¡œ ì˜ë¦¬í•˜ê²Œ ë¶„ë¦¬í•©ë‹ˆë‹¤.

---

## 2. ê²°ì œ ì‹¤íŒ¨ ì²˜ë¦¬ ì‹œìŠ¤í…œ (Failure Handling)

ê²°ì œê°€ ì‹¤íŒ¨í•˜ë”ë¼ë„ ì‚¬ìš©ì ê²½í—˜ì„ í•´ì¹˜ì§€ ì•Šê³ , ë°ì´í„° ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•œ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì²˜ë¦¬ (Flutter App)
- **ì‚¬ì „ ê²€ì¦ (Pre-Validation):**
  - ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ í™•ì¸.
- **ì—ëŸ¬ í”¼ë“œë°±:**
  - **ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜:** "ì¸í„°ë„· ì—°ê²°ì´ ë¶ˆì•ˆì •í•©ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."
  - **ìŠ¹ì¸ ê±°ì ˆ:** "ê²°ì œê°€ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤. ì”ì•¡ì´ë‚˜ ì¹´ë“œ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”."
  - **ì‹œìŠ¤í…œ ì˜¤ë¥˜:** "ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."
- **ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜:**
  - ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ ì‹œ 1íšŒ ì¦‰ì‹œ ì¬ì‹œë„ í—ˆìš©.

### ì„œë²„ ì¸¡ ì²˜ë¦¬ (Supabase Edge Functions)
- **ì›ìì  íŠ¸ëœì­ì…˜ (Atomic Transactions):**
  - ê²°ì œ ìŠ¹ì¸ê³¼ í¬ì¸íŠ¸ ì§€ê¸‰ì€ ë°˜ë“œì‹œ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
  - **í”„ë¡œì„¸ìŠ¤ íë¦„**:
    1.  `payment_transactions` ë ˆì½”ë“œ ìƒì„± (ìƒíƒœ: `pending`).
    2.  PGì‚¬ ê²°ì œ ìš”ì²­ (ê²€ì¦).
    3.  **ì„±ê³µ ì‹œ**: ìƒíƒœë¥¼ `success`ë¡œ ë³€ê²½ í›„ User í¬ì¸íŠ¸ ì¦ê°€ (`charge_vp` RPC).
    4.  **ì‹¤íŒ¨ ì‹œ**: ìƒíƒœë¥¼ `failed`ë¡œ ë³€ê²½í•˜ê³  ì—ëŸ¬ ì½”ë“œ ì €ì¥ (í¬ì¸íŠ¸ ì§€ê¸‰ ì•ˆ í•¨).
- **ì¤‘ë³µ ë°©ì§€ (Idempotency):**
  - í´ë¼ì´ì–¸íŠ¸ê°€ ë„¤íŠ¸ì›Œí¬ ì§€ì—°ìœ¼ë¡œ ê°™ì€ ìš”ì²­ì„ ì—¬ëŸ¬ ë²ˆ ë³´ë‚´ë”ë¼ë„ ì¤‘ë³µ ê²°ì œê°€ ë˜ì§€ ì•Šë„ë¡ `request_id`ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

---

## 3. í™˜ë¶ˆ ì‹œìŠ¤í…œ ê³„íš (Refund System)

### í™˜ë¶ˆ ì •ì±… (Draft)
- **ê°€ëŠ¥ ê¸°ê°„**: êµ¬ë§¤ í›„ **7ì¼ ì´ë‚´** ìš”ì²­ ì‹œ.
- **ì¡°ê±´**: êµ¬ë§¤í•œ í¬ì¸íŠ¸ë¥¼ **ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²½ìš°**ì—ë§Œ ì „ì•¡ í™˜ë¶ˆ ê°€ëŠ¥.
  - *Recommendation*: ë¶€ë¶„ í™˜ë¶ˆì€ ë³µì¡í•˜ë¯€ë¡œ, "ë¯¸ì‚¬ìš©ë¶„ ì „ì•¡ í™˜ë¶ˆ" ì •ì±…ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

### êµ¬í˜„ í”„ë¡œì„¸ìŠ¤
1.  **í™˜ë¶ˆ ìš”ì²­**:
    - ì•± ë‚´ ì„¤ì • -> `êµ¬ë§¤ ë‚´ì—­(Purchase History)` ë©”ë‰´.
    - íŠ¹ì • ê²°ì œ ê±´ì— ëŒ€í•´ [í™˜ë¶ˆ ìš”ì²­] ë²„íŠ¼ í´ë¦­.
    - ì‹œìŠ¤í…œì´ ìë™ ê²€ì¦ (7ì¼ ì´ë‚´ & ë³´ìœ  í¬ì¸íŠ¸ >= êµ¬ë§¤ í¬ì¸íŠ¸).
2.  **ì²˜ë¦¬ ë°©ì‹**:
    - **ìë™ í™˜ë¶ˆ (ì €ìœ„í—˜êµ°)**: êµ¬ë§¤ í›„ 24ì‹œê°„ ì´ë‚´ì´ë©° ë¯¸ì‚¬ìš© ì‹œ ì‹œìŠ¤í…œì´ ì¦‰ì‹œ ìë™ ì·¨ì†Œ ì²˜ë¦¬.
    - **ìˆ˜ë™ ê²€í†  (í‘œì¤€)**: `refund_requests` í…Œì´ë¸”ì— ê¸°ë¡ë˜ë©°, ê´€ë¦¬ì(Admin)ê°€ ìŠ¹ì¸ í›„ ì²˜ë¦¬.
3.  **ì™„ë£Œ ì²˜ë¦¬**:
    - PGì‚¬ ì·¨ì†Œ API í˜¸ì¶œ.
    - Supabaseì—ì„œ ì‚¬ìš©ì í¬ì¸íŠ¸ ì°¨ê°.
    - ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ ë°œì†¡.

### ë°ì´í„°ë² ì´ìŠ¤ ìš”êµ¬ì‚¬í•­
- **Table: `payment_transactions`**
  - `id`: UUID (PK)
  - `user_id`: UUID (FK)
  - `amount`: Integer (ê¸ˆì•¡)
  - `points`: Integer (ì§€ê¸‰ í¬ì¸íŠ¸)
  - `status`: `success` / `failed` / `refunded`
  - `gateway`: `iap_apple` / `iap_google` / `pg_portone`
  - `created_at`: Timestamp
- **Table: `refund_requests`**
  - `id`: UUID
  - `transaction_id`: UUID
  - `reason`: Text (ì‚¬ìœ )
  - `status`: `pending` / `approved` / `rejected`

---

## 4. í–¥í›„ ì‹¤í–‰ ë‹¨ê³„ (Next Steps)
1.  **Frontend**: `PointPurchaseScreen`ì— ê²°ì œ ìˆ˜ë‹¨ ë¶™ì´ê¸° (ì´ˆê¸°ì—ëŠ” í…ŒìŠ¤íŠ¸ ëª¨ë“œ).
2.  **Backend**: Supabaseì— `payment_transactions` í…Œì´ë¸” ì„¤ê³„ ë° ìƒì„±.
3.  **Integration**:
    - ì•±: `in_app_purchase` í”ŒëŸ¬í„° íŒ¨í‚¤ì§€ ì—°ë™.
    - ì›¹: í¬íŠ¸ì›(PortOne) ì—°ë™.
