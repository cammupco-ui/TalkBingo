# TalkBingo Product Requirements Document (PRD)

## 1. í”„ë¡œì íŠ¸ ê°œìš” (Project Overview)

**TalkBingo**ëŠ” AI Agentì™€ GraphDB(Neo4j)ë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ëŒ€í™”í˜• ë°¸ëŸ°ìŠ¤ ë¹™ê³  ê²Œì„ í”Œë«í¼ì…ë‹ˆë‹¤. ë‹¨ìˆœí•œ ì§ˆë¬¸ ìƒì„±ì„ ë„˜ì–´, ì‚¬ìš©ì ê°„ì˜ ê´€ê³„ì™€ ë§¥ë½ì„ ì´í•´í•˜ëŠ” **AI Agent System**ì´ Neo4jë¥¼ ì œì–´í•˜ì—¬ ìµœì ì˜ ì§ˆë¬¸ì„ ì„ ë³„í•˜ê³  ê²Œì„ ê²½í—˜ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

### 1.1 ëª©í‘œ (Goals)
- **ê´€ê³„ ì¦ì§„**: ì‚¬ìš©ì ê°„ì˜ ê´€ê³„ì™€ ì¹œë°€ë„ì— ìµœì í™”ëœ ì§ˆë¬¸ì„ í†µí•´ ëŒ€í™”ë¥¼ ìœ ë„í•©ë‹ˆë‹¤.
- **AI Agent ê¸°ë°˜ ê²½í—˜**: AIê°€ ì§ˆë¬¸ì„ ì§ì ‘ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, Neo4jì˜ ë°©ëŒ€í•œ ë°ì´í„°ë¥¼ ì§€ëŠ¥ì ìœ¼ë¡œ íƒìƒ‰í•˜ê³  ì œì–´í•˜ì—¬ ìµœì ì˜ ê²Œì„íŒì„ êµ¬ì„±í•©ë‹ˆë‹¤.
- **ì§€ì†ì  ìƒí˜¸ì‘ìš©**: ê²Œì„ íšŸìˆ˜ì™€ ê²°ê³¼ì— ë”°ë¼ ì¹œë°€ë„ ë ˆë²¨ì„ ì¡°ì •í•˜ê³ , ì´ì „ ëŒ€í™”ë¥¼ ê¸°ì–µí•˜ì—¬ ë§ì¶¤í˜• ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (System Architecture)

### 2.1 ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)
- **Frontend (Mobile App)**: Flutter (iOS/Android)
- **Frontend (Web/Admin)**: Next.js 16, React 19
- **Backend**: Next.js API Routes (Serverless Functions)
- **Database**: Neo4j (Graph Database)
- **AI Engine**: OpenAI GPT-4 (AI Agent System)
- **Real-time**: Socket.io

### 2.2 AI Agent System Architecture
AI AgentëŠ” ë°±ì—”ë“œì—ì„œ Neo4jë¥¼ ì»¨íŠ¸ë¡¤í•˜ëŠ” í•µì‹¬ ë‘ë‡Œ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

1.  **CodeName ìƒì„±ê¸° (CodeName Generator)**:
    - **ì…ë ¥ ë°ì´í„°**: í˜¸ìŠ¤íŠ¸/ê²ŒìŠ¤íŠ¸ ì •ë³´ (ë‚˜ì´, ì„±ë³„, ê³ í–¥, **ì ‘ì† ì§€ì—­**)
    - **ê¸°ëŠ¥**: ë‘ ì‚¬ìš©ìì˜ ì •ë³´ì™€ ì ‘ì† ì§€ì—­ê¹Œì§€ ì·¨í•© ë° ë¶„ì„í•˜ì—¬ íŠ¹ì„±ì„ ëŒ€í‘œí•˜ëŠ” **CodeName** ìƒì„±.
    - **Sub-Relations (ì„¸ë¶€ ê´€ê³„ ì½”ë“œ)**:
        - **ì¹œêµ¬(B)**: `Ar`(ê³ í–¥/ì–´ë¦´ì ), `Or`(ì§ì¥/ì¡°ì§), `Sc`(í•™êµ), `Dc`(ë™ë„¤), `Fr`(ì¼ë°˜)
        - **ê°€ì¡±(Fa)**: `Br`(í˜•ì œ), `Si`(ìë§¤), `Bs`/`Sb`(ë‚¨ë§¤), `Co`(ì‚¬ì´Œ), `Fs`/`Md`/`Ms`/`Fd`(ë¶€ëª¨-ìë…€), `Gp`(ì¡°ë¶€ëª¨-ì†ìë…€)
        - **ì—°ì¸(Lo)**: `Sw`(ë˜ë˜/ì—°ì• ì´ˆê¸°), `Gw`(ì„¸ëŒ€ì°¨ì´/ì—°ìƒì—°í•˜), `Hw`/`Pw`(ë¶€ë¶€)

2.  **ì§ˆë¬¸ íë ˆì´í„° (Question Curator)**:
    - **ì§ˆë¬¸ ê´€ë¦¬ ë° ì¶”ì¶œ (Management & Extraction)**:
        - **ì™¸ë¶€ ìƒì„± ë° ê²€ì¦**: ì§ˆë¬¸ ìƒì„±ì€ ë³„ë„ì˜ ì™¸ë¶€ í”„ë¡œê·¸ë¨ì„ í†µí•´ ì´ë£¨ì–´ì§€ë©°, ê²€ì¦ëœ ì§ˆë¬¸ë§Œì´ Neo4jì— ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.
        - **ì§ˆë¬¸ ì¶”ì¶œ**: CodeNameê³¼ ì‚¬ìš©ì ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Neo4jì—ì„œ ìµœì ì˜ ì§ˆë¬¸ 50ê°œë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.
        - **ì‚¬ìš© ê´€ë¦¬**:
            - **ì‚¬ìš© ê²°ê³¼ ì¶”ì **: ì–´ë–¤ ì§ˆë¬¸ì´ ì‚¬ìš©ë˜ì—ˆê³ , ì–´ë–¤ ë°˜ì‘(ì„ íƒ)ì´ ìˆì—ˆëŠ”ì§€ ê¸°ë¡.
            - **ì‚¬ìš© ìœ ë¬´ ê´€ë¦¬**: ì¤‘ë³µ ì‚¬ìš©ì„ ë°©ì§€í•˜ê±°ë‚˜, ì¼ì • ê¸°ê°„ í›„ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡ ê´€ë¦¬.
        - **ì—…ë°ì´íŠ¸ í•„ìš”ì„± ê°ì§€**: íŠ¹ì • CodeNameì´ë‚˜ ì¹´í…Œê³ ë¦¬ì˜ ì§ˆë¬¸ì´ ê³ ê°ˆë˜ê±°ë‚˜ íŠ¸ë Œë“œì— ë’¤ì³ì§ˆ ê²½ìš°, ì™¸ë¶€ ìƒì„± í”„ë¡œê·¸ë¨ì— ì—…ë°ì´íŠ¸ ìš”ì²­ ì‹ í˜¸ ìƒì„±.
        - **Fallback ê´€ë¦¬**: ë¹™ê³  ë³´ë“œ(25ì¹¸)ë¥¼ ì±„ìš°ì§€ ëª»í•˜ëŠ” ê²½ìš°(ì§ˆë¬¸ ë¶€ì¡± ë“±), ì˜ˆë¹„ ì§ˆë¬¸ì„ ë°°ì¹˜í•˜ê±°ë‚˜ ìƒìœ„/ìœ ì‚¬ ì¹´í…Œê³ ë¦¬ ì§ˆë¬¸ìœ¼ë¡œ ëŒ€ì²´.

3.  **ê¸°ì–µ ë° ì„±ì¥ (Memory & Growth)**:
    - **Memory Rules**:
        - **ë°¸ëŸ°ìŠ¤ í€´ì¦ˆ**: ê°„ê²°ì„±(10ë‹¨ì–´), í•¨ì¶•ì„±/ëŒ€ë¦½ì„±, ì¹œë°€ë„ë³„ ìœ ë¨¸, ëŒ€í™” í™•ì¥ì„±, ê³µê°/ì›ƒìŒ, íŠ¸ë Œë“œ ë°˜ì˜.
        - **ì§„ì‹¤ê²Œì„**: ê°„ê²°ì„±, ê¹Šì´ ì¡°ì ˆ(L1~L5), í˜¸ê¸°ì‹¬/ê³µê°, ì„¸ëŒ€ë³„ ê· í˜•, ê³µìœ /ì—°ê²° ìœ ë„.
    - **Evolution**: ê²Œì„ì´ ë°˜ë³µë ìˆ˜ë¡ AIê°€ ë‘ ì‚¬ëŒì˜ ê´€ê³„ë¥¼ ë” ê¹Šì´ ì´í•´í•˜ì—¬, ë”ìš± ê°œì¸í™”ë˜ê³  ì •êµí•œ ì§ˆë¬¸ì„ ì œì‹œ.

4.  **ë¶„ì„ê°€ (Analyst)**:
    - ê²Œì„ ì¢…ë£Œ í›„ ë°¸ëŸ°ìŠ¤ ê²Œì„ ê²°ê³¼ë¥¼ ë¶„ì„ ë° ìš”ì•½.
    - ì‚¬ìš©ì ê´€ê³„ì— ëŒ€í•œ ë¦¬í¬íŠ¸ ì œê³µ.

---

## 3. ì‚¬ìš©ì í”Œë¡œìš° (User Flows)

### 3.1 ì‚¬ìš©ì ìœ í˜• ë° ì ‘ì† ê²½ë¡œ (User Types & Access Paths)
- **Host (í˜¸ìŠ¤íŠ¸)**:
    - **ì ‘ì† ê²½ë¡œ**: ëª¨ë°”ì¼ ì•± (App) ì„¤ì¹˜ í•„ìˆ˜.
    - **ìê²©**: ì´ë©”ì¼ ì¸ì¦ì„ í†µí•œ íšŒì›ê°€ì… ì™„ë£Œ ìœ ì €.
    - **ì—­í• **: ê²ŒìŠ¤íŠ¸ ì´ˆì²­, ê²Œì„ ë°© ê°œì„¤, ê²Œì„ ì§„í–‰ ì œì–´.
- **Guest (ê²ŒìŠ¤íŠ¸)**:
    - **ì ‘ì† ê²½ë¡œ**: ëª¨ë°”ì¼ ì•± (App) ë˜ëŠ” ëª¨ë°”ì¼ ì›¹ (Web). ë³„ë„ ì„¤ì¹˜ ì—†ì´ ë§í¬ ì ‘ì† ê°€ëŠ¥.
    - **ìê²©**: ì´ˆì²­ ì½”ë“œë¥¼ ë°›ì€ ì‚¬ìš©ì.
    - **íšŒì›ê°€ì…**:
        - ê²Œì„ í”Œë ˆì´ëŠ” ë¹„íšŒì› ìƒíƒœë¡œ ê°€ëŠ¥.
        - **í¬ì¸íŠ¸ ì €ì¥**: íšë“í•œ í¬ì¸íŠ¸(VP/AP)ë¥¼ ì €ì¥í•˜ë ¤ë©´ ê²Œì„ ì¢…ë£Œ í›„ íšŒì›ê°€ì… í•„ìš”.
        - **ì•± ì„¤ì¹˜ ìœ ë„**: ê²Œì„ ì¢…ë£Œ í›„ ì•± ì„¤ì¹˜ ê¶Œìœ  íŒì—… ì œê³µ.

### 3.2 í˜¸ìŠ¤íŠ¸ í”Œë¡œìš° (Host Flow)
1.  **í™ˆ í™”ë©´ (`/`)**:
    - ì•± ì‹¤í–‰ í›„ 'ì´ˆì²­ ì½”ë“œ ìƒì„±' ë²„íŠ¼ í´ë¦­.
    - ì´ˆì²­ ì½”ë“œ(6ìë¦¬) ë° ë§í¬ ìƒì„±.
2.  **í˜¸ìŠ¤íŠ¸ ì •ë³´ ì…ë ¥ (`/host/setup`)**:
    - ë‹‰ë„¤ì„ ì…ë ¥.
    - ë‚˜ì´, ì„±ë³„ ì„ íƒ.
    - ê³ í–¥ ì„ íƒ (ë„/ì‹œ + ìƒì„¸ ì§€ì—­).
    - ì ‘ì† ì§€ì—­ ê³µìœ  ë™ì˜.
    - *System*: í˜¸ìŠ¤íŠ¸ ì •ë³´ ì €ì¥ ë° GameSession ìƒì„±.
3.  **ê²Œì„ ì„¤ì • (`/host/invite`)**:
    - **ê²ŒìŠ¤íŠ¸ ì •ë³´ ì…ë ¥ (í˜¸ìŠ¤íŠ¸ ê´€ì )**:
        - ê²ŒìŠ¤íŠ¸ì˜ ë‚˜ì´, ì„±ë³„ ì…ë ¥.
        - **ê´€ê³„ ìœ í˜• ì„ íƒ**: ëŒ€ë¶„ë¥˜(ì¹œêµ¬, ê°€ì¡±, ì—°ì¸) ì„ íƒ í›„ ì„¸ë¶€ ê´€ê³„(ì˜ˆ: ì†Œê¿‰ì¹œêµ¬, ì§ì¥ë™ë£Œ) ì„¤ì •.
        - **ì¹œë°€ë„ ì„¤ì •**: í˜¸ìŠ¤íŠ¸ê°€ ìƒê°í•˜ëŠ” ê²ŒìŠ¤íŠ¸ì™€ì˜ ì¹œë°€ë„(L1~L5) ì…ë ¥.
4.  **í˜¸ìŠ¤íŠ¸ ëŒ€ê¸°ì‹¤ (`/host/waiting`)**:
    - ê²ŒìŠ¤íŠ¸ ì ‘ì† ëŒ€ê¸°.
    - ê²ŒìŠ¤íŠ¸ ì •ë³´ ì…ë ¥ ì™„ë£Œ ì‹œ AI Agentê°€ ì •ë³´ ì·¨í•©.
    - **ì§ˆë¬¸ ì¶”ì¶œ**: AIê°€ ëŒ€í™” ì´ë ¥ê³¼ ê´€ê³„ë¥¼ ë¶„ì„í•˜ì—¬ 50ê°œ ì§ˆë¬¸ ì¶”ì¶œ ë° ë¹™ê³ íŒ êµ¬ì„±.
    - 'ê²Œì„ ì‹œì‘' ë²„íŠ¼ í´ë¦­ (í˜¸ìŠ¤íŠ¸ ì „ìš©).

### 3.3 ê²ŒìŠ¤íŠ¸ í”Œë¡œìš° (Guest Flow)
1.  **ì´ˆì²­ ì½”ë“œ ì…ë ¥ (`/join`)**:
    - ê³µìœ ë°›ì€ ì´ˆì²­ ì½”ë“œ ì…ë ¥.
    - ì½”ë“œ ì…ë ¥ë€ í•˜ë‹¨ì— **'ì°¸ì—¬í•˜ê¸°'** ë²„íŠ¼ í´ë¦­.
2.  **ê²ŒìŠ¤íŠ¸ ì •ë³´ ì…ë ¥ (`/guest/setup`)**:
    - **ë³¸ì¸ ì •ë³´ ì…ë ¥**: ë‹‰ë„¤ì„, ê³ í–¥, **ì ‘ì† ì§€ì—­**.
    - *System*: ê²ŒìŠ¤íŠ¸ ì •ë³´ ì „ì†¡ ë° GameSession ì—°ê²°.
3.  **ê²ŒìŠ¤íŠ¸ ëŒ€ê¸°ì‹¤ (`/guest/waiting`)**:
    - í˜¸ìŠ¤íŠ¸ì˜ ê²Œì„ ì‹œì‘ ëŒ€ê¸°.
    - *Socket*: ê²Œì„ ì‹œì‘ ì´ë²¤íŠ¸ ìˆ˜ì‹  ì‹œ ê²Œì„ í™”ë©´ìœ¼ë¡œ ìë™ ì´ë™.

### 3.4 ê²Œì„ í”Œë ˆì´ (Common Flow)
1.  **ê²Œì„ í™”ë©´ (`/game/[id]`)**:
    - **UI êµ¬ì„±**: í˜¸ìŠ¤íŠ¸ì™€ ê²ŒìŠ¤íŠ¸ ë™ì¼í•œ UI (ë‹¨, ì»¨íŠ¸ë¡¤ ê¶Œí•œ ì°¨ì´).
    - **View ì „í™˜**: ë¹™ê³  ë³´ë“œ â†” ì±„íŒ… ë¦¬ìŠ¤íŠ¸ ë³´ë“œ ìŠ¤ì™€ì´í”„ ë˜ëŠ” ë²„íŠ¼ìœ¼ë¡œ ì „í™˜ ê°€ëŠ¥.
    - **ì‹¤ì‹œê°„ ì±„íŒ…**: ê²Œì„ ì¤‘ ììœ ë¡œìš´ ì±„íŒ… ê°€ëŠ¥.
2.  **í„´ ê¸°ë°˜ ì§„í–‰ (Turn-based)**:
    - í˜¸ìŠ¤íŠ¸ì™€ ê²ŒìŠ¤íŠ¸ê°€ ë²ˆê°ˆì•„ê°€ë©° ë¹™ê³  ì¹¸(ì§ˆë¬¸)ì„ ì„ íƒ.
    - **ì»¨íŠ¸ë¡¤ (Host Only)**: ê²Œì„ ì§„í–‰ ë° ì œì–´ëŠ” í˜¸ìŠ¤íŠ¸ë§Œ ê°€ëŠ¥í•˜ë©°, ê²ŒìŠ¤íŠ¸ëŠ” ìƒíƒœ ë³€í™”ë¥¼ ë™ê¸°í™”ë°›ìŒ.
        1. **ê²Œì„ ì‹œì‘ (Start Game)**:
            - **ì´ˆê¸° ìƒíƒœ**: ë°±ì—”ë“œì—ì„œ íë ˆì´ì…˜ëœ ì§ˆë¬¸ì´ ë°°ì¹˜ëœ ë¹™ê³  ë³´ë“œ ëŒ€ê¸° ìƒíƒœ.
            - **ë™ì‘**: ì‹œì‘ ë²„íŠ¼ í´ë¦­ ì‹œ í„´ì´ ê²°ì •ë˜ê³  ë¹™ê³  ì¹¸ ì„ íƒì´ í™œì„±í™”ë¨.
        2. **ì¼ì‹œ ì •ì§€ (Pause)**:
            - **ë™ì‘**: ë¹™ê³  ë³´ë“œëŠ” ë”¤(Dim) ì²˜ë¦¬ë˜ì–´ ë¹„í™œì„±í™”ë˜ì§€ë§Œ, **ì‹¤ì‹œê°„ ì±„íŒ…ì€ ììœ ë¡­ê²Œ ê°€ëŠ¥**.
        3. **ê²Œì„ ì¢…ë£Œ (End Game)**:
            - **ê°•ì œ ì¢…ë£Œ**: ê²Œì„ ì§„í–‰ ì¤‘ ì–¸ì œë“  ê°€ëŠ¥.
            - **ì €ì¥ í›„ ì¢…ë£Œ**: ë¹™ê³  ë¼ì¸ì´ ìµœì†Œ í•œ ì¤„ ì´ìƒ ì™„ì„±ëœ í›„ ê°€ëŠ¥. ì™„ì„±ëœ ë¼ì¸ ìˆ˜ì— ë”°ë¼ í¬ì¸íŠ¸(VP/AP) ê³„ì‚°.
        4. **ì§ˆë¬¸ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê¸° (Reload Questions)**:
            - **ì¡°ê±´**: ê²Œì„ ì‹œì‘ ì „, í˜¸ìŠ¤íŠ¸ê°€ ì§ˆë¬¸ êµ¬ì„±ì„ ë³€ê²½í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©.
            - **íŠ¹ì§•**: ëŒ€ê¸°ì‹¤/ê²Œì„ í™”ë©´ ì…ì¥ ì§í›„ë¶€í„° ì±„íŒ…ì€ ê°€ëŠ¥í•˜ë¯€ë¡œ, ì±„íŒ…ìœ¼ë¡œ ìƒì˜ í›„ ë³€ê²½ ê°€ëŠ¥.
        5. **ê²Œì„ ì €ì¥ (Save Game)**:
            - **ì¡°ê±´**: ê²Œì„ ì‹œì‘ ì´í›„ ì–¸ì œë“  ì €ì¥ ê°€ëŠ¥.
            - **ë°©ì‹**: ê²Œì„ ì„¸ì…˜ë‹¹ í•˜ë‚˜ì˜ ë¡œê·¸ íŒŒì¼(DB Log)ì— **ì±„íŒ… ë‚´ìš©**ê³¼ **ê²Œì„ ê²°ê³¼(ì„ íƒ/ë¹™ê³ )**ê°€ ì‹œê°„ìˆœìœ¼ë¡œ ëˆ„ì  ì €ì¥ë¨.
3.  **í€´ì¦ˆ ì§„í–‰ (Quiz & Mechanics)**:
    - **ë¹™ê³ ì¹¸ ì„ íƒ**: í˜¸ìŠ¤íŠ¸/ê²ŒìŠ¤íŠ¸ê°€ í„´ì— ë§ì¶° ì¹¸ì„ ì„ íƒí•˜ë©´ **ë¹™ê³  ë³´ë“œì™€ ë™ì¼í•œ ì‚¬ì´ì¦ˆì˜ í€´ì¦ˆ ëª¨ë‹¬ íŒì—…**ì´ ëœ¸.
    - **ë°¸ëŸ°ìŠ¤ í€´ì¦ˆ**: A vs B ì„ íƒì§€ í‘œì‹œ.
    - **ê²°ê³¼ í™•ì¸ ë° í”¼ë“œë°±**:
        - ì–‘ì¸¡ ì„ íƒ ì™„ë£Œ ì‹œ, ê²°ê³¼(ì¼ì¹˜/ë¶ˆì¼ì¹˜)ê°€ ëª¨ë‹¬ í•˜ë‹¨ì— ì¦‰ì‹œ í‘œì‹œë¨.
        - **ë§¤ì¹­ ì„±ê³µ (Match)**: ë¹™ê³ ì¹¸ íšë“ (ğŸ’•).
            - *Feedback (10ì¢… ëœë¤)*:
                1. "ìš°ë¦° ì·¨í–¥ì´ ë¹„ìŠ·í•œê²ƒ ê°™ìŠµë‹ˆë‹¤"
                2. "ì •ë§ ì¢‹ì€ì„ íƒì…ë‹ˆë‹¤"
                3. "ì–´ì©ì§€ ë§ˆìŒì´ í†µí•œë‹¤ê³  ìƒê°í–ˆì–´ìš”"
                4. "ì—­ì‹œ ìš°ë¦¬ëŠ” ìš´ëª…ì¸ê°€ ë´ìš”!"
                5. "í…”ë ˆíŒŒì‹œê°€ í†µí–ˆë„¤ìš”!"
                6. "í™˜ìƒì˜ í˜¸í¡ì…ë‹ˆë‹¤!"
                7. "ì´ë˜ì„œ ìš°ë¦¬ê°€ ì˜ ë§ë‚˜ ë´ìš”."
                8. "ì†Œë¦„ ë‹ê²Œ ë˜‘ê°™ë„¤ìš”!"
                9. "ì·¨í–¥ ì €ê²© ì„±ê³µ!"
                10. "ì™„ë²½í•œ ì¼ì¹˜ì…ë‹ˆë‹¤!"
        - **ë§¤ì¹­ ì‹¤íŒ¨ (Mismatch)**: ë¹™ê³ ì¹¸ **ì ê¹€ (Lock)** (ğŸ”’).
            - *Feedback (10ì¢… ëœë¤)*:
                1. "ì•„ì‰½ì§€ë§Œ ë‹¹ì‹ ì˜ ì„ íƒì„ ì¡´ì¤‘í•©ë‹ˆë‹¤"
                2. "ì•„ê¹ë„¤ìš”. í•˜ì§€ë§Œ ë‹¤ìŒë²ˆì—” ë‹¤ë¥¼ê±°ì—ìš”"
                3. "ì„œë¡œ ë‹¤ë¥¸ ì ë„ ë§¤ë ¥ì ì´ì£ ."
                4. "ë‹¤ë¦„ì„ ì´í•´í•˜ëŠ” ê²ƒë„ ì¤‘ìš”í•´ìš”."
                5. "ì´ë²ˆì—” ì—‡ê°ˆë ¸ì§€ë§Œ ê´œì°®ì•„ìš”!"
                6. "ì·¨í–¥ì€ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‹ˆê¹Œìš”."
                7. "ë‹¤ìŒ ì§ˆë¬¸ì—ì„œ ë§ì¶°ë´ìš”!"
                8. "ì„œë¡œë¥¼ ë” ì•Œì•„ê°€ëŠ” ê³¼ì •ì´ë„¤ìš”."
                9. "ë°˜ëŒ€ë¼ì„œ ë” ëŒë¦¬ëŠ” ë²•!"
                10. "í‹€ë¦° ê²Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ê±°ì˜ˆìš”."
    - **ì ê¹€ í•´ì œ (Unlock)**:
        - ì ê¸´ ì¹¸ì€ **ê´‘ê³  ì‹œì²­** í›„ í•´ì œ ê°€ëŠ¥.
        - í•´ì œ ì‹œ í•´ë‹¹ ì¹¸ì—ëŠ” **ìƒˆë¡œìš´ ì§ˆë¬¸**ì´ ì¬ë°°ì¹˜ë¨.
        - **ê´‘ê³  ì—°ë™ (Ad Integration)**:
            - **Banner Ad**: í™”ë©´ í•˜ë‹¨(Footer) ìƒì‹œ ë…¸ì¶œ.
            - **Rewarded Ad**: ì ê¸´ ë¹™ê³  ì¹¸ í•´ì œ ì‹œ ì‹œì²­.
            - **Interstitial Ad**: ê²Œì„ ì¢…ë£Œ í›„ ê²°ê³¼ í˜ì´ì§€ ì§„ì… ì „ ì „ë©´ ê´‘ê³  ë…¸ì¶œ.
            - **Ad Removal**: ê²Œì„ ì‹œì‘ ì „ ë˜ëŠ” ì„¤ì •ì—ì„œ **200 Point** ì°¨ê°í•˜ì—¬ í•´ë‹¹ ê²Œì„ ì„¸ì…˜ì˜ ëª¨ë“  ê´‘ê³  ì œê±° ê°€ëŠ¥.
            - **Platform**: `google_mobile_ads` (Flutter).
            - **Verification**: ì„œë²„ ì‚¬ì´ë“œ ê²€ì¦(SSV)ì„ í†µí•´ ë³´ìƒ ì§€ê¸‰ ë¬´ê²°ì„± í™•ë³´ ê¶Œì¥.
4.  **ì¤‘ë‹¨ ë° ì¬ì—°ê²° (Disconnection Handling)**:
    - **Heartbeat**: í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ê°„ 30ì´ˆ ì£¼ê¸° ì—°ê²° í™•ì¸.
    - **Paused State**: 30ì´ˆ ì´ìƒ ì‘ë‹µ ì—†ì„ ì‹œ ê²Œì„ `paused` ìƒíƒœ ì „í™˜. ìƒëŒ€ë°©ì—ê²Œ "ì—°ê²° ëŠê¹€" ì•Œë¦¼ ë° 90ì´ˆ ì¹´ìš´íŠ¸ë‹¤ìš´ ë…¸ì¶œ.
    - **Reconnect**: 90ì´ˆ ë‚´ ì¬ì ‘ì† ì‹œ `playing` ìƒíƒœ ë³µêµ¬ ë° ê²Œì„ ì¬ê°œ.
    - **Timeout**: 90ì´ˆ ì´ˆê³¼ ì‹œ `finished(timeout)` ì²˜ë¦¬. ì”ë¥˜ ì‚¬ìš©ì ìŠ¹ë¦¬ ë˜ëŠ” ë¬´ìŠ¹ë¶€ ì²˜ë¦¬.

### 3.5 ê²Œì„ ê·œì¹™ ë° ì ìˆ˜ (Rules & Scoring)
1.  **ë¹™ê³  ì™„ì„± ì¡°ê±´**:
    - ê°€ë¡œ, ì„¸ë¡œ, ëŒ€ê°ì„  5ê°œ ì¹¸ íšë“ ì‹œ 1ì¤„ ì™„ì„±.
    - **ìµœëŒ€ 3ì¤„**ê¹Œì§€ ì™„ì„± ê°€ëŠ¥í•˜ë©°, 3ì¤„ ì™„ì„± ì‹œ ê²Œì„ ìë™ ì¢…ë£Œ.
2.  **ì ìˆ˜ ì‹œìŠ¤í…œ (Scoring System)**:
    - **VP (Victory Point)**: ë¹™ê³  ë¼ì¸ ì™„ì„± ì‹œ íšë“ (í˜¸ìŠ¤íŠ¸ 50ì , ê²ŒìŠ¤íŠ¸ 30ì ). ìŠ¹ë¦¬ ë³´ìƒ.
    - **AP (Activity Point)**: í˜¸ìŠ¤íŠ¸ í™œë™ ì ìˆ˜. ì¶”í›„ ì•„ì´í…œ êµ¬ë§¤ë‚˜ ê´‘ê³  ì œê±° í¬ì¸íŠ¸ë¡œ ì „í™˜ ê°€ëŠ¥.
        - **ì ë¦½ ê¸°ì¤€**: ê²Œì„ë°© ê°œì„¤(+10), ì¹œêµ¬ ì´ˆëŒ€(+5), ì§ˆë¬¸ ì €ì¥(+2).
    - **EP (Experience Point)**: ê²ŒìŠ¤íŠ¸/í˜¸ìŠ¤íŠ¸ ì°¸ê°€ ê²½í—˜ì¹˜. ìŠ¹íŒ¨ì™€ ë¬´ê´€í•˜ê²Œ ê²Œì„ ì™„ì£¼ ì‹œ ì§€ê¸‰(+20).
    - **TS (Trust Score)**: ê²ŒìŠ¤íŠ¸ê°€ í˜¸ìŠ¤íŠ¸ë¥¼ í‰ê°€í•˜ëŠ” ì‹ ë¢°ë„ ì ìˆ˜ (ë³„ì  5.0 ë§Œì ).
        - **ë³´ìƒ**: ì›”ê°„ í‰ê·  ë³„ì  4.5 ì´ìƒ ìœ ì§€ ì‹œ 10 Point ì¶”ê°€ ì ë¦½. ì»¤ë®¤ë‹ˆí‹° ì„œë¹„ìŠ¤ ë‚´ í‰íŒ ì§€í‘œë¡œ í™œìš©.
    - **Point Economy (í¬ì¸íŠ¸ ê²½ì œ)**:
        - **êµ¬ë§¤ (IAP)**:
            - 1,000 Point: 900 KRW
            - 10,000 Point: 9,000 KRW
        - **ì‚¬ìš© (Usage)**:
            - **ê´‘ê³  ì œê±°**: ê²Œì„ 1íšŒë‹¹ **200 Point** ì°¨ê° (ë°°ë„ˆ, ë¦¬ì›Œë“œ, ì „ë©´ ê´‘ê³  ëª¨ë‘ ì œê±°).
    - *Note*: ëª¨ë“  ì ìˆ˜ëŠ” `Reward` í…Œì´ë¸”ì— ëˆ„ì  ê´€ë¦¬ë¨.
4.  **ê²Œì„ ê²°ê³¼ (`/game/[id]/result`)**:
    - **ê²°ê³¼ í™•ì¸**: ìµœì¢… ë¹™ê³  í˜„í™©, íšë“ í¬ì¸íŠ¸(VP/AP/EP) í™•ì¸.
    - **AI Agent ë¶„ì„ (Analysis)**:
        - **ì„¸ì…˜ ìš”ì•½ (Session Summary)**: ì‚¬ìš©ëœ ì§ˆë¬¸, ì£¼ìš” ëŒ€í™” ë‚´ìš©, í”Œë ˆì´ì–´ ì •ë³´ë¥¼ ì¢…í•©í•˜ì—¬ ê²Œì„ ì„¸ì…˜ ìš”ì•½ ìƒì„±.
        - **ê´€ê³„ ë°œì „ ë¶„ì„ (Relationship Progress)**:
            - ìµœê·¼ 30ì¼ê°„ì˜ ê²Œì„ ê¸°ë¡ ë¶„ì„.
            - ì¹œë°€ë„(Intimacy Level) ë° ì‹ ë¢°ë„(Trust Score) ë³€í™” ì¶”ì´ ê·¸ë˜í”„ ì œê³µ.
            - "ë‘ ë¶„ì€ ì ì  ë” ê¹Šì€ ëŒ€í™”ë¥¼ ë‚˜ëˆ„ê³  ê³„ì‹œë„¤ìš”!"ì™€ ê°™ì€ ì¸ì‚¬ì´íŠ¸ ì œê³µ.

---

## 4. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (Functional Requirements)

### 4.1 AI Agent & Neo4j Control
- **CodeName ë§¤í•‘**: ì‚¬ìš©ì ì†ì„±(Age, Gender, Hometown, Location, Relation)ì„ ì¡°í•©í•˜ì—¬ ìµœì ì˜ ì§ˆë¬¸ í´ëŸ¬ìŠ¤í„°ì¸ CodeNameì„ ë„ì¶œ.
- **ì§€ëŠ¥í˜• ì§ˆë¬¸ ì¶”ì¶œ (Evolutionary)**:
    - ë‹¨ìˆœ ëœë¤ ì¶”ì¶œ ì§€ì–‘.
    - **Input**: í˜¸ìŠ¤íŠ¸ ì •ë³´, í˜¸ìŠ¤íŠ¸ê°€ ì…ë ¥í•œ ê²ŒìŠ¤íŠ¸ ì •ë³´, ê²ŒìŠ¤íŠ¸ ì‹¤ì œ ì •ë³´, ì´ì „ ëŒ€í™” ì´ë ¥, ê²Œì„ íšŸìˆ˜, ì¹œë°€ë„ ë³€í™”.
    - **Process**: Neo4j ê·¸ë˜í”„ë¥¼ íƒìƒ‰í•˜ì—¬ í˜„ì¬ ê´€ê³„ ë‹¨ê³„ì— ë”± ë§ëŠ” ì§ˆë¬¸ 50ê°œ(25ê°œ ì‚¬ìš© + 25ê°œ ì˜ˆë¹„) íë ˆì´ì…˜.
    - **Output**: ë§ì¶¤í˜• ë¹™ê³  ë³´ë“œ êµ¬ì„±.
- **ê²Œì„ ê²°ê³¼ ê¸°ì–µ**: `User-[:PLAYED]->(GameSession)-[:RESULT]->(Summary)` í˜•íƒœë¡œ ê²Œì„ ê²°ê³¼ë¥¼ ê·¸ë˜í”„ì— ì €ì¥.
- **ì™¸ë¶€ ì§ˆë¬¸ ì—°ë™ (External Question Interface)**:
    - **ë°©ì‹**: Neo4j ì—°ë™ ê´€ë¦¬ì í˜ì´ì§€ë¥¼ í†µí•œ **CSV ì¼ê´„ ì—…ë¡œë“œ**.
    - **í”„ë¡œì„¸ìŠ¤**: ì™¸ë¶€ í”„ë¡œê·¸ë¨ ìƒì„± â†’ CSV ë³€í™˜ â†’ ê´€ë¦¬ì ì—…ë¡œë“œ â†’ CodeName ë§¤í•‘ ê²€í†  â†’ ì„œë¹„ìŠ¤ ë°˜ì˜.
    - **ì •ì±…**: ìƒˆë¡œìš´ ì§ˆë¬¸ ì—…ë°ì´íŠ¸ ì‹œ, ê¸°ì¡´ CodeNameê³¼ì˜ ì í•©ì„±ì„ ê²€í† í•˜ì—¬ ì—°ê²°.

### 4.2 ì„±ëŠ¥ ë° ìµœì í™” (Performance & Rate Limiting)
- **ê³¼ë„í•œ API í˜¸ì¶œ ë°©ì§€**:
    - **Debouncing**: ì‚¬ìš©ì ì…ë ¥(ê²€ìƒ‰ ë“±)ì— ëŒ€í•œ API í˜¸ì¶œ ë””ë°”ìš´ì‹± ì²˜ë¦¬.
    - **Caching**: ìì£¼ ì¡°íšŒë˜ëŠ” ì§ˆë¬¸ì´ë‚˜ CodeName ë§¤í•‘ ê²°ê³¼ëŠ” Redis ë˜ëŠ” ì¸ë©”ëª¨ë¦¬ ìºì‹œ ì ìš©.
    - **Batch Processing**: ê²Œì„ ê²°ê³¼ ì €ì¥ì€ ì‹¤ì‹œê°„ì´ ì•„ë‹Œ ê²Œì„ ì¢…ë£Œ í›„ ì¼ê´„ ì²˜ë¦¬.
- **ì¿¼ë¦¬ ìµœì í™”**: Neo4j ì¸ë±ì‹±(Indexing)ì„ í†µí•´ ì§ˆë¬¸ ì¡°íšŒ ì†ë„ ìµœì í™”.
- **ì˜ˆì™¸ ì²˜ë¦¬ (Error Handling)**:
    - **Neo4j/AI ì§€ì—°**: "ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤" ì•Œë¦¼ í‘œì‹œ í›„, ë¶„ì„ ì™„ë£Œ ì‹œ í‘¸ì‹œ ì•Œë¦¼ ë˜ëŠ” ë¦¬í¬íŠ¸í•¨ìœ¼ë¡œ ê²°ê³¼ ì „ì†¡.
    - **ì—°ê²° ì‹¤íŒ¨**: ì¬ì‹œë„ ë¡œì§(Retry Policy) ì ìš© ë° ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€("ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”") ì œê³µ.

### 4.3 ê²Œì„ ì‹œìŠ¤í…œ
- **ë¹™ê³  ë¡œì§**: ê°€ë¡œ, ì„¸ë¡œ, ëŒ€ê°ì„  ë¹™ê³  íŒì • ì•Œê³ ë¦¬ì¦˜.
- **í„´ ì‹œìŠ¤í…œ**: Player 1(Host) -> Player 2(Guest) ìˆœì„œ ì œì–´ ë° ë™ê¸°í™”.
- **UI ë™ê¸°í™”**: ë¹™ê³  ì¹¸ ì„ íƒ ìƒíƒœ, í€´ì¦ˆ ëª¨ë‹¬ íŒì—…, ì±„íŒ… ë©”ì‹œì§€ ì‹¤ì‹œê°„ ë™ê¸°í™”.

---

## 5. ë°ì´í„° ëª¨ë¸ (Data Model - Neo4j)

### 5.1 Nodes
- **User**: `user_id`, `nick`, `age`, `gender`, `birthCity`, `role`, `country`, `region`, `timezone`
- **GameSession**: `game_id`, `mp_id`, `cp_id`, `size`, `status`, `created_at`
- **Question**: `q_id` (CodeName ê¸°ë°˜), `type` (T/B/M), `content`, `choice_a`, `choice_b`, `intimacy_level`, `humor_level`, `cat`, `subcategory`
- **CodeName**: `code`, `mp`, `cp`, `ir`, `sub_rel`, `intimacy`, `keywords` (JSON)
- **Reward**: `reward_id`, `vp` (Victory Point), `ap` (Activity Point), `ep` (Experience Point), `ts` (Trust Score)
- **Log**: `log_id`, `game_id`, `turn_no`, `user_id`, `action`, `detail` (JSON)

### 5.2 Relationships
- **User Relationships**:
    - `(User)-[:FRIEND_WITH {type: 'B-Ar', intimacy: 'L3', trust_score: 4.5}]->(User)`
    - `(User)-[:FAMILY_WITH {type: 'Fa-Br', intimacy: 'L5'}]->(User)`
    - `(User)-[:LOVES {type: 'Lo-Sw', intimacy: 'L4'}]->(User)`
- **Game & Content**:
    - `(User)-[:HAS_CODENAME]->(CodeName)`
    - `(CodeName)-[:CONTAINS]->(Question)`
    - `(CodeName)-[:MAPPED_TO]->(Keyword)`
        - *Note*: **CodeName**ì´ ì§ˆë¬¸ ì¶”ì¶œì˜ **í•„ìˆ˜ ê¸°ì¤€(Primary Filter)**ì´ë©°, **Keyword**ëŠ” ì¶”ì¶œëœ ì§ˆë¬¸ ë‚´ì—ì„œ ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ê±°ë‚˜ ì¶”ì²œí•˜ê¸° ìœ„í•œ **ê°€ì‚°ì  ìš”ì†Œ(Bonus Factor)**ë¡œ í™œìš©ë¨.
    - `(User)-[:PLAYED_IN {role: 'host/guest', result: '...'}]->(GameSession)`
    - `(GameSession)-[:USED_QUESTION]->(Question)`
    - `(User)-[:ANSWERED {response: '...', score: 10, timestamp: ...}]->(Question)`
    - `(User)-[:EARNED]->(Reward)`
- **Location**:
    - `(User)-[:FROM]->(Hometown)`
    - `(User)-[:LOCATED_AT]->,(Location)`

---

## 6. API ì¸í„°í˜ì´ìŠ¤ (API Interface)

### 6.1 Backend API (Flutter Client Integration)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET/POST | `/api/init-neo4j` | Neo4j ì—°ê²° í™•ì¸ ë° ì´ˆê¸°í™” |
| POST | `/api/users/save-and-select-codename` | ì‚¬ìš©ì ì •ë³´ ì €ì¥ ë° CodeName ì„ ë³„ |
| GET | `/api/questions/by-codename` | CodeName ê¸°ë°˜ ì§ˆë¬¸ ì¡°íšŒ (Limit, Offset ì§€ì›) |
| POST | `/api/relation/update` | ê´€ê³„ ë° ì¹œë°€ë„ ì—…ë°ì´íŠ¸ |
| POST | `/api/agent/analyze-result` | ê²Œì„ ì¢…ë£Œ í›„ ê²°ê³¼ ë¶„ì„ ë° ìš”ì•½ |

### 6.2 Socket Events
#### Client â†’ Server (Emit)
- `join-waiting-room`: ëŒ€ê¸°ì‹¤ ì°¸ê°€ ìš”ì²­ (gameId, role)
- `guest-info-updated`: ê²ŒìŠ¤íŠ¸ ì •ë³´ ì—…ë°ì´íŠ¸ ì „ì†¡
- `game-status-updated`: ê²Œì„ ìƒíƒœ ë³€ê²½ ìš”ì²­ (start, pause, end)

#### Server â†’ Client (Listen)
- `player-joined`: í”Œë ˆì´ì–´ ì°¸ê°€ ì•Œë¦¼
- `guest-info-changed`: ê²ŒìŠ¤íŠ¸ ì •ë³´ ë³€ê²½ ì•Œë¦¼ (í˜¸ìŠ¤íŠ¸ ìˆ˜ì‹ )
- `codename-updated`: CodeName ìƒì„±/ì—…ë°ì´íŠ¸ ì•Œë¦¼
- `questions-ready`: ì§ˆë¬¸ íë ˆì´ì…˜ ì™„ë£Œ ì•Œë¦¼
- `game-status-changed`: ê²Œì„ ìƒíƒœ ë³€ê²½ ì•Œë¦¼
- `turn-change`: í„´ ë³€ê²½ ì•Œë¦¼
- `bingo-completed`: ë¹™ê³  ë‹¬ì„± ì•Œë¦¼

---

## 7. UI/UX Design System

### 7.1 Color Palette (Host & Guest Theme)
- **Host (Pink Theme)**:
    - **Primary**: `#BD0558`, **Secondary**: `#FF0077`, **Dark**: `#610C39`
    - **Background**: `#0C0219` (Main), `#F4E7E8` (Player)
    - **Text**: `#FF0077` (Primary), `#FFF4F6` (Secondary), `#CDBFC1` (Muted), `#610C39` (Dark)
- **Guest (Purple Theme)**:
    - **Primary**: `#430887`, **Secondary**: `#6B14EC`, **Dark**: `#2E0645`
    - **Background**: `#0C0219` (Main), `#F0E7F4` (Player)
    - **Text**: `#6B14EC` (Primary), `#FDF9FF` (Secondary), `#C7BFCD` (Muted), `#2E0645` (Dark)
- **Common**:
    - **Background**: `#FFF9FB` (Light), `#0C0219` (Dark)
    - **Functional**: `#FF0000` (Warning), `#68CDFF` (Explanation)

### 7.2 Button Styles
- **Primary Button**:
    - **Host**: `#BD0558` (Pink)
    - **Guest**: `#430887` (Purple)
- **Secondary Button**:
    - **Host**: `#FFF9FB` (Hover Outline: `#610C39`)
    - **Guest**: `#FDF9FF` (Hover Outline: `#2E0645`)
- **Deactivated Button**:
    - **Host**: `#2E0645` (Hover Outline: `#FFF9FB`)
    - **Guest**: `#C7BFCD` (Hover Outline: `#FDF9FF`)

### 7.3 Typography
- **Title Font**: "NURA"
    - **Weights/Sizes**: 10px Light, 14px Semibold, 24px Extrabold.
- **Body Font (English)**: "Alexandria"
- **Body Font (Korean)**: "K2D"
    - **Weights/Sizes**: 10px Medium, 12px Semibold, 14px Semibold, 16px Bold.
- **Colors**:
    - **Host**: `#FFF4F6` (Main Pink), `#FF0077` (Secondary Pink)
    - **Guest**: `#FDF9FF` (Main Purple), `#6B14EC` (Secondary Purple)

---

## 8. ìˆ˜ìµ ëª¨ë¸ (Revenue Model)

### 8.1 ê´‘ê³  (Advertising)
- **ë°°ë„ˆ ê´‘ê³  (Banner Ad)**: í™”ë©´ í•˜ë‹¨(Footer)ì— ìƒì‹œ ë…¸ì¶œ.
- **ë³´ìƒí˜• ê´‘ê³  (Rewarded Ad)**: ì ê¸´ ë¹™ê³  ì¹¸(Mismatch) í•´ì œ ì‹œ ì‹œì²­.
- **ì „ë©´ ê´‘ê³  (Interstitial Ad)**: ê²Œì„ ì¢…ë£Œ í›„ ê²°ê³¼ í˜ì´ì§€ ì§„ì… ì „ ë…¸ì¶œ.

### 8.2 ì¸ì•± ê²°ì œ (In-App Purchase)
- **í¬ì¸íŠ¸ êµ¬ë§¤**:
    - **1,000 Point**: 900 KRW
    - **10,000 Point**: 9,000 KRW
- **í¬ì¸íŠ¸ ì‚¬ìš©**:
    - **ê´‘ê³  ì œê±°**: ê²Œì„ 1íšŒë‹¹ **200 Point** ì°¨ê° (ëª¨ë“  ê´‘ê³  ì œê±°).
    - **ì•„ì´í…œ êµ¬ë§¤**: (ì¶”í›„ ì˜ˆì •) ìºë¦­í„°, ì´ëª¨í‹°ì½˜ ë“±.


