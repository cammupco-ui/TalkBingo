# TalkBingo 게임 규칙 (Game Rules)

## 1. 🎯 빙고 셀 구성 및 타입 (Cell Types)
각 빙고 셀은 기본적으로 **밸런스 퀴즈(B Type)** 또는 **진실게임 퀴즈(T Type)** 중 하나로 구성됩니다. **(동적 텍스트 변형 적용)**
*   모든 질문은 **현재 턴(Attacker)과 상대방(Defender)의 성별 조합**에 따라 "누나/동생...", "오빠/너..." 등으로 호칭이 자동 변환되어 표시됩니다.

### **T Type (Truth Game)**
*   **성공 조건**: 질문 아래 입력창에 **20자 이내**의 텍스트 또는 음성(STT)으로 진실된 답변을 입력해야 합니다.
*   **승인 방식**: 답변 내용은 상대방이 듣고/보고 맥락과 성실성을 판단하여 **"동의(Approve)"**해야 인정됩니다.
*   **성공 시**: 해당 셀 점유 + **EP +1** 획득.
*   **실패 시**: 해당 셀 **Lock(잠김)** 처리되며 보상 없음. (백엔드에서 **M Type**으로 변경됨).

### **B Type (Balance Game)**
*   **성공 조건**: 두 가지 선택지(A/B) 중 하나를 선택하고, 상대방에게 이유를 설명해야 합니다.
*   **승인 방식**: 상대방이 이유를 듣고 납득하여 **"동의(Approve)"**해야 인정됩니다.
*   **성공 시**: 해당 셀 점유 + **EP +1** 획득.
*   **실패 시**: 해당 셀 **Lock(잠김)** 처리되며 보상 없음. (백엔드에서 **M Type**으로 변경됨).

### **M Type (Mini Game) - 패자부활전**
*   **발동 조건**: 유저가 퀴즈에 실패하여 빙고 셀이 **Lock(점유 실패)** 되었을 때 활성화됩니다.
*   **쿨다운**: Lock된 직후에는 도전할 수 없으며, **2턴(약 1라운드)** 이 지나야 미니게임 도전이 가능합니다. 이를 통해 비공감 직후의 감정적 충돌을 방지합니다.
*   **발동 주체**: 쿨다운이 끝난 후 **현재 턴을 가진 플레이어**가 해당 Lock된 셀을 탭하면 미니게임이 시작됩니다.
*   **미니게임 종류**: **타겟슈터(Target Shooter)** 또는 **승부차기(Penalty Kick)** 중 랜덤으로 선택됩니다.
*   **진행 방식**: **2라운드 교대 공격** — 1라운드에서 도전자가 공격, 2라운드에서 상대가 공격하여 각자 점수를 기록합니다.
*   **보상**: 미니게임에서 **더 높은 점수**를 기록한 유저가 해당 칸을 **점유**합니다. 무승부 시 Lock 상태 유지.

### **C Type (Challenge / Steal) - 빼앗기**
*   **발동 조건**: **상대방이 이미 점유한 타일**을 내 턴에 탭하면 도전할 수 있습니다.
*   **횟수 제한**: 플레이어당 게임당 **최대 2회**까지만 시도 가능합니다.
*   **면역 규칙**: **완성된 빙고 줄**에 포함된 타일은 챌린지 대상에서 제외됩니다 (줄 면역).
*   **확인 프롬프트**: 도전 시 "챌린지 시도를 사용하시겠습니까? (남은 횟수: X/2)" 확인 대화상자가 표시됩니다.
*   **진행 방식**: M Type과 동일하게 **타겟슈터** 또는 **승부차기** 중 랜덤 2라운드 교대 공격.
*   **보상**:
    *   **공격 성공 (Steal)**: 도전자가 타일을 빼앗고 **+10 AP** 획득.
    *   **방어 성공 (Defense)**: 원래 소유자가 타일을 지키고 **+5 AP** 획득.
*   **턴 소비**: 결과에 관계없이 도전자의 **턴이 종료**됩니다.

---

## 2. 🏆 승리 조건 및 점수 계산 (Victory & Scoring)

빙고 줄을 1줄 완성하고 게임을 종료하면 해당 유저의 승리가 되며 VP를 획득합니다.
MP(방장)는 1줄 완성 후 **[게임 종료]** 또는 **[이어하기]**를 선택할 수 있습니다.

### **상황별 시나리오 (Scenarios)**

#### **시나리오 1: 단판 승부 (1줄 완성 후 종료)**
*   유저 A가 첫 빙고 줄을 완성하고 게임 종료.
*   **결과**: 유저 A 승리.
*   **보상**: **유저 A** = 1줄 AP + VP

#### **시나리오 2: 연승 (이어하기)**
*   유저 A가 첫 번째 줄 완성 (이어하기 선택) -> 유저 A는 일단 **AP(Activity Point)**만 획득.
*   **더블 포인트**: 유저 A가 두 번째 줄도 완성하고 종료 시 -> **"더블 VP"** 획득.
*   **트리플 포인트**: 유저 A가 세 번째 줄까지 완성하고 종료 시 -> **"트리플(3배) VP"** 획득.

#### **시나리오 3: 무승부 (Draw)**
*   1차: 유저 A가 첫 줄 완성.
*   2차: 유저 B가 두 번째 줄 완성하고 게임 종료.
*   **결과**: 무승부. VP를 **반반(50%)씩** 나눠 가집니다.
*   **보상**:
    *   **유저 A**: 1줄 AP + VP 50%
    *   **유저 B**: 2줄 AP + VP 50%

#### **시나리오 4: 역전승 (Comeback)**
*   1차: 유저 A가 첫 줄 완성.
*   2차 & 3차: 유저 B가 두 번째와 세 번째 줄을 연속으로 완성하고 게임 종료.
*   **보상**:
    *   **유저 A**: 1줄 AP (VP 없음)
    *   **유저 B**: 2줄 AP + 3줄 AP + **"더블 VP"** (2,3차 승리분)

#### **시나리오 5: 무승부 (Board Full)**
*   모든 25개 칸이 채워졌지만 승리 조건(종료)을 선택하지 못하고 게임이 끝난 경우.
*   **결과**: 승자 없음.
*   **보상**:
    *   VP(Victory Point) = 0
    *   각자 획득한 AP와 EP만 정산합니다.

#### **시나리오 6: 강제 종료 및 중단 (Sudden Exit)**
*   빙고 줄을 완성하고 "계속하기" 등을 선택하다가 앱이 종료되거나 화면이 이탈한 경우.
*   **정산**: **빙고 줄을 완성했을 당시의 시점**을 기준으로 점수를 정산합니다.
*   **표시**: 재접속 또는 로직 흐름에 따라 **리워드 페이지**로 이동하여 해당 점수를 표시합니다.

## 2.5 🎮 게임 준비 및 인터페이스 (Game Setup & UI)
*   **입장 알림 (Entrance Notification)**:
    *   **게스트 화면**: "초대자가 입장하셨습니다" (Host has entered) 문구가 모달로 크게 떴다가 사라집니다.
    *   **호스트 화면**: "ooo님이 입장하셨습니다" (Guest [Name] has entered) 문구가 모달로 크게 떴다가 사라집니다.
*   **광고 제거 비용**: 1회 게임당 **200 VP** 차감.
*   **적용 시점**: 게임 시작 전(Settings 단계)에서 결제 여부를 묻고, 차감 시 해당 게임("새로 만들어질 게임")은 광고 없이 진행됩니다.
*   **효과**: 퀴즈 실패 시나 대화 중간 등에 등장하는 전면 광고 등이 사라집니다.

---

## 3. 💰 포인트 정의 (Points Definition)

이벤트는 3가지 방식(T, B, M)이지만, 리워드는 빙고 줄 완성 후 게임 종료를 위한 최종 보상입니다.

| 포인트 | 약어 | 설명 | 적립 규칙 | 전환 규칙 |
| :--- | :--- | :--- | :--- | :--- |
| **Victory Point** | **VP** | 게임 최종 **승리자**가 획득. 광고 제거 등에 사용. | 승리 시 **+50 VP** | (사용처: 광고제거 200 VP) |
| **Activity Point** | **AP** | **빙고 줄 완성** 및 **챌린지** 시 획득. | 빙고: **+20/+40/+60**, 챌린지 공격 성공: **+10**, 방어 성공: **+5** | **100 AP → 50 VP** 전환 가능 |
| **Experience Point** | **EP** | **빙고 셀(칸) 획득** 시 쌓이는 경험치. | 칸 획득 시마다 **+1 EP** | **100 EP → 50 VP** 전환 가능 |
| **Trust Score** | **TS** | **신뢰도 평가**. (1~5점) | 게임 종료 후 평가 | - |

---

## 4. 🔒 회원 및 데이터 보존 (Member & Data Persistence)

*   **익명 플레이 (Anonymous Play)**: 로그인 없이 "게스트 모드"로 게임참여 및 포인트 획득이 가능합니다. 단, 앱 삭제 또는 기기 변경 시 데이터가 **유실될 수 있습니다**.
*   **계정 연동 (Link Account)**: 설정(Settings) 메뉴에서 구글/이메일 계정을 연동하면, 현재까지 획득한 **모든 포인트(VP/AP/EP)와 게임 기록**이 안전하게 서버에 영구 저장이 되며, 기기가 변경되어도 유지됩니다.
*   **구매 내역 (Purchase)**: 익명 상태에서의 결제 내역은 해당 기기에 귀속되므로, 안전한 사용을 위해 **계정 연동 후 결제**를 권장합니다.
*   **게임 저장 및 종료 (Save & Exit)**:
    *   **게임 저장 (Save Game)**: 누르면 현재 상태가 **임시 저장**됩니다.
    *   **게임 종료 (End Game)**:
        *   **호스트**: 즉시 게임 상태가 **영구 저장**되고 종료됩니다.
        *   **게스트**: 상태가 **임시 저장**된 채로 **리워드 페이지**로 이동합니다. 리워드 페이지에서 **회원가입** 버튼을 누르면 게임 데이터가 **영구 저장**됩니다.
*   **시스템 오류 (System Error)**:
    *   시스템 오류로 게임이 강제 종료된 경우, **오류 안내 메시지**가 표시됩니다.
    *   이후 **스플래시 화면**을 거쳐 **홈(Home) 페이지**로 안전하게 이동합니다.
